<!doctype html>

<html lang="en"> 


<head> 

    <meta charset="utf-8"> 
    <meta name="description" content="HTML5 Template"> 
    <link rel="stylesheet" type="text/css" href="style2.css"> 
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <center><h1>The Great Race</h1>
   <center<h3>click on the green light to start the race. </h3> 

</head> 


<center><body> 
	
    <div class="red"></div> 
    <div class="blue"></div> 
    <div2 onclick="switchLight(0);" class="light stop on"></div2> 
   <div2 onclick="switchLight(1);" class="light slow"></div2>
    <div2 onclick="switchLight(2);" class="light go"></div2>  
</body>

<script type="text/javascript">
var LIGHTS = document.getElementsByClassName("light");
function allOff() { 
  for (var i=0; i<LIGHTS.length; i = i+1) { 
    LIGHTS[i].classList.remove("on"); 
  } 
} 
</script>


<script> 
function switchLight(lightNumber) { 
  allOff(); 
  var light = LIGHTS[lightNumber]; 
  light.classList.add("on"); 
}

        $(document).ready(function() { 
            $("#go").click(function() { 
                var r = $('.red'), 
                    b = $('.blue'), 
                    wW = $(window).width(), 
                    rSpeed = Math.floor(Math.random() * wW + wW), 
                    bSpeed = Math.floor(Math.random() * wW + wW); 
                switchLight(2); 
                function winTest() { 
                    if (rSpeed > bSpeed) { 
                        alert('Top red car wins! :)'); 
                        reset(); 
                    } else { 
                        alert('Bottom red car wins! :)'); 
                        reset(); 
                    } 
                    switchLight(0); 
                } 

                function race() { 
                    var rAnim = r.animate({ 
                        left: rSpeed 
                    }, { 
                        duration: 600, 
                        done: function() { 
                            bAnim.stop(300); 
                            winTest(300); 
                        } 
                    }); 
                    var bAnim = b.animate({ 
                        left: bSpeed 
                    }, { 
                        duration: 600, 
                        done: function() { 
                            rAnim.stop(300); 
                            winTest(300); 
                        } 
                    }); 
                } 
                race(); 
                function reset() { 
                    rSpeed = 0; 
                    bSpeed = 0; 
                    r.css('left'); 
                    b.css('left'); 
                } 
            }); 
        }); 
    </script> 
</body> 
</html> 

